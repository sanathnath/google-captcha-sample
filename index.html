<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reCAPTCHA</title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body style='background-color: white;'>
    <form id="recaptcha" action="?" method="POST">
      <div class="g-recaptcha"
        data-sitekey="6Ld1UwElAAAAALqAjE1T7nEm2xy3x3471sobr_yG"
        data-callback="captchaCallback"></div>

    </form>
    <script>
      let imageStyle = 'hidden';
      let intervelId = '';

      function captchaCallback(response){
        console.log(response);
        if(typeof Captcha!=="undefined"){
          Captcha.postMessage(response);
          clearInterval(intervelId);
        }
      }

      function elementCheck(){
        let ele = (document.getElementById('recaptcha').nextElementSibling).nextElementSibling.style.visibility;
        // console.log(ele);
        if (ele == "visible" && imageStyle == 'hidden') {
          imageStyle = 'visible';
          isImageVisible();
        }else if(ele == "hidden" && imageStyle == 'visible'){
          imageStyle = 'hidden';
          isImageHidden();
        }
      }

      function isImageVisible(){
        check.postMessage("visible");
      }

      function isImageHidden(){
        check.postMessage("hidden");
      }

      intervelId = setInterval(elementCheck,2000);
    </script>
  </body>
</html>

<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reCAPTCHA demo: Simple page</title>
     <script src="https://www.google.com/recaptcha/api.js" async defer></script>
     <script>
       function onSubmit(token) {
         document.getElementById("demo-form").submit();
       }
     </script>
  </head>
  <body>
    <form id="demo-form" action="?" method="POST">
      <button class="g-recaptcha" data-sitekey="6LeYUwYlAAAAAIanjVudhv3-7U5UmJAjVs19I1V4" data-callback="onSubmit">Submit</button>
      <br/>
    </form>
  </body>
</html> -->